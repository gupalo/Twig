``for``
=======

Циклічно переглядайте кожен елемент у послідовності або відображенні. Наприклад, щоб
відобразити список користувачів, наданий у змінній з назвою ``users``:

.. code-block:: html+twig

    <h1>Members</h1>
    <ul>
        {% for user in users %}
            <li>{{ user.username|e }}</li>
        {% endfor %}
    </ul>

.. note::

    Послідовність або відображення може бути як масивом, так і об'єктом, що реалізує
    інтерфейс ``Traversable``.

Якщо вам потрібно виконати ітерацію над послідовністю чисел, ви можете використати оператор ``..``:

.. code-block:: twig

    {% for i in 0..10 %}
        * {{ i }}
    {% endfor %}

Наведений вище фрагмент коду виведе всі числа від 0 до 10.

Це також може бути корисним для літер:

.. code-block:: twig

    {% for letter in 'a'..'z' %}
        * {{ letter }}
    {% endfor %}

Оператор ``..`` може приймати будь-який вираз з обох сторін:

.. code-block:: twig

    {% for letter in 'a'|upper..'z'|upper %}
        * {{ letter }}
    {% endfor %}

.. tip::

    Якщо вам потрібен крок, відмінний від 1, ви можете використати функцію ``range``
    замість цього.

Змінна ``loop``
---------------

Усередині блоку циклу ``for`` ви можете отримати доступ до деяких спеціальних змінних:

===================== =============================================================
Змінна                Опис
===================== =============================================================
``loop.index``        Поточна ітерація циклу (індексується 1)
``loop.index0``       Поточна ітерація циклу (індексується 0)
``loop.revindex``     Кількість ітерацій від кінця циклу (індексується 1)
``loop.revindex0``    Кількість ітерацій від кінця циклу (індексується 0)
``loop.first``        True, якщо це перша ітерація
``loop.last``         True, якщо це остання ітерація
``loop.length``       Кількість елементів у послідовності
``loop.parent``       Батьківський контекст
===================== =============================================================

.. code-block:: twig

    {% for user in users %}
        {{ loop.index }} - {{ user.username }}
    {% endfor %}

.. note::

    Змінні ``loop.length``, ``loop.revindex``, ``loop.revindex0`` і
    ``loop.last`` доступні лише для масивів PHP або об'єктів, які
    реалізують інтерфейс ``Countable``.

Пункт ``else``
--------------

Якщо ітерація не відбулася через те, що послідовність була порожньою, ви можете 
відобразити блок заміни за допомогою ``else``:

.. code-block:: html+twig

    <ul>
        {% for user in users %}
            <li>{{ user.username|e }}</li>
        {% else %}
            <li><em>no user found</em></li>
        {% endfor %}
    </ul>

Ітерація за ключами
-------------------

За замовчуванням цикл ітераційно перебирає значення послідовності. Ви можете ітерувати
за ключами, використовуючи фільтр ``keys``:

.. code-block:: html+twig

    <h1>Members</h1>
    <ul>
        {% for key in users|keys %}
            <li>{{ key }}</li>
        {% endfor %}
    </ul>

Ітерація за ключами та значеннями
---------------------------------

Ви також можете отримати доступ як до ключів, так і до значень:

.. code-block:: html+twig

    <h1>Members</h1>
    <ul>
        {% for key, user in users %}
            <li>{{ key }}: {{ user.username|e }}</li>
        {% endfor %}
    </ul>

Ітерація за підмножиною
-----------------------

Можливо, ви захочете ітераційно переглянути підмножину значень. Цього можна досягти за допомогою
фільтра :doc:slice <../filters/slice>`:

.. code-block:: html+twig

    <h1>Top Ten Members</h1>
    <ul>
        {% for user in users|slice(0, 10) %}
            <li>{{ user.username|e }}</li>
        {% endfor %}
    </ul>

Ітерація за рядком
------------------

Для ітераційного перебору символів рядка використовуйте фільтр
:doc:`split <../filters/split>`:

.. code-block:: html+twig

    <h1>Characters</h1>
    <ul>
        {% for char in "諺 / ことわざ"|split('') -%}
            <li>{{ char }}</li>
        {%- endfor %}
    </ul>
